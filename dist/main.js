(()=>{const e=480,t=640,n=100,o=20,l=["yellow","blue","green","red","orange","purple","pink","brown","cyan","magenta"],r={yellow:{score:10},blue:{score:5},green:{score:2},red:{score:0,gameOver:!0},orange:{score:-5},purple:{score:-10},pink:{score:-2},brown:{score:15},cyan:{score:8},magenta:{score:0,gameOver:!0}};let c,a=(e-n)/2,s=[],i=0,d=!1,m=0;const y=document.getElementById("gameCanvas"),g=y.getContext("2d"),u=document.getElementById("score"),h=document.getElementById("timer"),f=document.getElementById("gameOverScreen"),p=document.getElementById("finalScore"),I=document.getElementById("restartButton"),E=document.getElementById("mainMenu"),S=document.getElementById("startButton"),x=document.getElementById("lastScore");function v(){i=0,a=(e-n)/2,s=[],k(),function(){let e=15;h.textContent=`Time: ${e}`,c=setInterval((()=>{e--,h.textContent=`Time: ${e}`,e<=0&&B()}),1e3)}(),f.style.display="none",E.style.display="none",y.style.display="block",d=!1,b()}function B(){y.style.display="none",p.textContent=`Final Score: ${i}`,function(e){const t=localStorage.getItem("highestScore")||0;m=Math.max(e,t),localStorage.setItem("highestScore",m)}(i),f.style.display="block",d=!0,clearInterval(c)}function k(){u.textContent=`Score: ${i}`}function b(){d||(g.clearRect(0,0,e,t),g.fillStyle="blue",g.fillRect(a,t-o,n,o),s.forEach((e=>{g.beginPath(),g.arc(e.x,e.y,10,0,2*Math.PI),g.fillStyle=e.color,g.fill()})),s.forEach((e=>{e.y+=e.speed,e.y>t&&(s=s.filter((t=>t!==e)))})),s.forEach((e=>{if(e.y+10>t-o&&e.x>a&&e.x<a+n){const t=r[e.color];i+=t.score,k(),t.gameOver&&B(),s=s.filter((t=>t!==e))}})),requestAnimationFrame(b))}document.addEventListener("keydown",(t=>{d||("ArrowLeft"===t.key?a=Math.max(a-10,0):"ArrowRight"===t.key&&(a=Math.min(a+10,e-n)))})),S.addEventListener("click",v),I.addEventListener("click",v),setInterval((function(){if(d)return;const t=Math.random()*e,n=l[Math.floor(Math.random()*l.length)],o=3+2*Math.random();s.push({x:t,y:0,color:n,speed:o})}),1e3),y.style.display="none",f.style.display="none",E.style.display="block",m=localStorage.getItem("highestScore")||0,x.textContent=`Your highest score: ${m}`})();